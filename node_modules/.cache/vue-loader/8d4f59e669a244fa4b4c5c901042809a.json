{"remainingRequest":"/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/src/views/hr/emp/EmpManager.vue?vue&type=style&index=0&id=0ff0fe07&lang=css","dependencies":[{"path":"/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/src/views/hr/emp/EmpManager.vue","mtime":1653376899562},{"path":"/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/node_modules/css-loader/dist/cjs.js","mtime":1652081429906},{"path":"/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1652081430080},{"path":"/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/node_modules/postcss-loader/src/index.js","mtime":1652081430025},{"path":"/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/node_modules/cache-loader/dist/cjs.js","mtime":1652081426314},{"path":"/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/node_modules/vue-loader-v16/dist/index.js","mtime":1652081430080}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLmV4ZWN1dGl2ZUxpc3R7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICBtaW4taGVpZ2h0OiA1MHB4OwogIH0K"},{"version":3,"sources":["/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/src/views/hr/emp/EmpManager.vue"],"names":[],"mappings":";EA4WE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAClB","file":"/Users/gwondaewon/Workspace/ApprovalManagementSystem/VueProjectBase/src/views/hr/emp/EmpManager.vue","sourceRoot":"","sourcesContent":["<template >\n  <div style=\"width:1000px; height: auto; margin: 10% auto;\">\n    <BCard style=\"width: 1000px; height: auto;  box-shadow: rgba(0,0,0,0.3) 0px 4px 20px 0px; border-radius: 15px;\">\n      <div style=\"width: 500px; height: 500px; border-right: 1px solid rgba(116, 116, 116, 0.5); padding-right: 8px; float: left\">\n\n        <div style=\"height: 20px; text-align: center\">\n          <div>회원 관리 페이지 입니다.</div>\n          <hr style=\"margin: 0\"/>\n        </div>\n\n            <div style=\"border:1px solid black; margin-top: 10px; padding: 5px; height: 470px; overflow-y: auto\">\n              <div style=\"height: 40px\">\n                <b-button variant=\"primary\" style=\"height: 30px; font-size: 13px; float:right; margin:5px 5px\" @click=\"searchEmpList\">조회하기</b-button>\n\n                <div style=\"display: inline-flex; padding:5px; float: right\">\n                  <h5 style=\"margin:2px 4px\">부서 : </h5>\n                  <b-form-select style=\"height: 30px; width: 120px; font-size: 12px\" :options=\"deptOptions\" v-model=\"deptCode\"/>\n                </div>\n                <div style=\"display: inline-flex; padding:5px; float: right\">\n                  <h5 style=\"margin:2px 4px\">직책 : </h5>\n                  <b-form-select style=\"height: 30px; width: 120px; font-size: 12px\" :options=\"positionOptions\" v-model=\"positionCode\"/>\n                </div>\n              </div>\n              <div>\n                <div style=\"text-align: center; display:flex; width: 100%\">\n                  <div style=\"border-bottom:2px solid black; width: 70px; height: 25px\">사번</div>\n                  <div style=\"border-bottom:2px solid black; width: 100px; height: 25px\">이름</div>\n                  <div style=\"border-bottom:2px solid black; width: 150px; height: 25px\">회원 ID</div>\n                  <div style=\"border-bottom:2px solid black; width: 150px; height: 25px\">부서명</div>\n                  <div style=\"border-bottom:2px solid black; width: 150px; height: 25px\">직급</div>\n                </div>\n                <div v-for=\"(item, index) in empList\" :key=\"index\" style=\"text-align: center; display:flex; width: 100%\">\n                  <div style=\"border-left:1px solid black;border-bottom:1px solid black; border-right:1px solid black; width: 70px; height: 25px\" :id=\"item.empNumber\" @click=\"selectedEmpInfo($event)\">{{ item.empNumber }}</div>\n                  <div style=\"border-bottom:1px solid black; border-right:1px solid black; width: 100px; height: 25px\" :id=\"item.empNumber\" @click=\"selectedEmpInfo($event)\">{{ item.empName }}</div>\n                  <div style=\"border-bottom:1px solid black; border-right:1px solid black; width: 150px; height: 25px\" :id=\"item.empNumber\" @click=\"selectedEmpInfo($event)\">{{ item.empId }}</div>\n                  <div style=\"border-bottom:1px solid black; width: 150px; height: 25px\" :id=\"item.empNumber\" @click=\"selectedEmpInfo($event)\">{{ item.deptName }}</div>\n                  <div style=\"border-left:1px solid black; border-bottom:1px solid black; border-right:1px solid black; width: 150px; height: 25px\" :id=\"item.empNumber\" @click=\"selectedEmpInfo($event)\">{{ item.positionName }}</div>\n                </div>\n\n              </div>\n          </div>\n\n\n      </div>\n      <!-- 우측 -->\n      <div style=\"float: right; width: 460px;\">\n\n        <h4 style=\"margin:auto\">선택된 사원</h4>\n        <div style=\"border: 1px solid navy; width: 100%; text-align: left; padding:7px; height: 470px\">\n          <!-- 사번 -->\n          <div style=\"margin: 20px 5px 20px 5px; display: inline-flex;\">\n            <div style=\"width: 80px; height: 25px; text-align: right\">\n              <div style=\"margin-right: 10px\">사번</div>\n            </div>\n            <b-form-input :value=\"empInfo[0].empNumber\" style=\"width: 120px; height: 30px; font-size: 13px\" disabled/>\n          </div>\n          <!-- 이름 -->\n          <div style=\"margin: 20px 5px 20px 5px; display: inline-flex;\">\n            <div style=\"width: 80px; height: 25px; text-align: right\">\n              <div style=\"margin-right: 10px\">이름</div>\n            </div>\n            <b-form-input :value=\"empInfo[0].empName\" style=\"width: 120px; height: 30px; font-size: 13px\" disabled/>\n          </div>\n          <!-- 회원 ID -->\n          <div style=\"margin: 20px 5px 20px 5px; display: inline-flex;\">\n            <div style=\"width: 80px; height: 25px; text-align: right\">\n              <div style=\"margin-right: 10px\">ID</div>\n            </div>\n            <b-form-input :value=\"empInfo[0].empId\" style=\"width: 120px; height: 30px; font-size: 13px\" :disabled=\"disabled\"/>\n          </div>\n          <!-- 회원 PW -->\n          <div style=\"margin: 20px 5px 20px 5px; display: inline-flex;\">\n            <BIconEyeSlashFill style=\"position:fixed; width: 20px; height: 30px; font-size: 13px; right:315px\" v-show=\"!showPw && editMode\" @click=\"showPassword\"/>\n            <BIconEyeFill style=\"position:fixed; width: 20px; height: 30px; font-size: 13px; right:315px\" v-show=\"showPw && editMode\" @click=\"showPassword\"/>\n            <div style=\"width: 80px; height: 25px; text-align: right\">\n              <div style=\"margin-right: 10px\">PW</div>\n            </div>\n            <b-form-input v-model=\"empInfo[0].empPw\" :type=\"password\" style=\"width: 120px; height: 30px; font-size: 13px\" :disabled=\"disabled\"/>\n          </div>\n          <!-- 부서명 -->\n          <div style=\"margin: 20px 5px 20px 5px; display: inline-flex;\">\n            <div style=\"width: 80px; height: 25px; text-align: right\">\n              <div style=\"margin-right: 10px\">부서명</div>\n            </div>\n            <b-form-select v-model=\"empInfo[0].deptCode\" :options=\"deptEditOptions\" style=\"width: 120px; height: 30px; font-size: 13px\" v-show=\"editMode\"/>\n            <b-form-input :value=\"empInfo[0].deptName\" style=\"width: 120px; height: 30px; font-size: 13px\" v-show=\"!editMode\" disabled/>\n          </div>\n          <!-- 직급 -->\n          <div style=\"margin: 20px 5px 20px 5px; display: inline-flex;\">\n            <div style=\"width: 80px; height: 25px; text-align: right\">\n              <div style=\"margin-right: 10px\">직급</div>\n            </div>\n            <b-form-select v-model=\"empInfo[0].positionCode\" :options=\"positionEditOptions\" style=\"width: 120px; height: 30px; font-size: 13px\" v-show=\"editMode\"/>\n            <b-form-input :value=\"empInfo[0].positionName\" style=\"width: 120px; height: 30px; font-size: 13px\" v-show=\"!editMode\" disabled/>\n          </div>\n          <!-- 가입날짜 -->\n          <div style=\"margin: 20px 5px 20px 5px; display: inline-flex;\">\n            <div style=\"width: 80px; height: 25px; text-align: right\">\n              <div style=\"margin-right: 10px\">가입날짜</div>\n            </div>\n            <b-form-input :value=\"empInfo[0].joinDate\" style=\"width: 120px; height: 30px; font-size: 13px\" disabled/>\n          </div>\n          <!-- 탈퇴날짜 -->\n          <div style=\"margin: 20px 5px 20px 5px; display: inline-flex;\">\n            <div style=\"width: 80px; height: 25px; text-align: right\">\n              <div style=\"margin-right: 10px\">탈퇴날짜</div>\n            </div>\n            <b-form-input :value=\"empInfo[0].withdrawDate\" style=\"width: 120px; height: 30px; font-size: 13px\" disabled/>\n          </div>\n          <!-- 회원상태 -->\n          <div style=\"margin: 20px 5px 20px 5px; display: inline-flex;\">\n            <div style=\"width: 80px; height: 25px; text-align: right\">\n              <div style=\"margin-right: 10px\">회원상태</div>\n            </div>\n            <b-form-input :value=\"empInfo[0].statusName\" style=\"width: 120px; height: 30px; font-size: 13px\" disabled/>\n          </div>\n          <!-- 수정 완료 버튼 -->\n          <div style=\"margin: 10px 5px 20px 5px; display: inline-flex;\" v-show=\"!disabled\">\n            <b-button variant=\"success\" style=\"width: 100px; height: 40px; font-size:16px; margin: 0 0 0 80px\" @click=\"editEmp\">수정 완료</b-button>\n          </div>\n        </div>\n      </div>\n    </Bcard>\n    <div style=\"margin-top:10px; bottom:0\">\n      <b-button style=\"float: right; margin-right: 5px\" variant=\"warning\" @click=\"setEditMode\">수정</b-button>\n      <b-button style=\"float: right; margin-right: 5px\" variant=\"danger\" @click=\"withdrawEmp\" :disabled=\"!disabled\">탈퇴</b-button>\n      <b-button style=\"float: right; margin-right: 5px\" variant=\"primary\" @click=\"$router.go(-1)\">뒤로가기</b-button>\n    </div>\n\n  </div>\n</template>\n<script>\n  import { mapState } from \"vuex\";\n\n  export default {\n\n    components:{\n    },\n    created() {\n      const empSearchOption = { deptCode : this.deptCode, positionCode : this.positionCode }\n      this.$store.dispatch('hr/emp/findAllEmp', empSearchOption)\n    },\n    computed:{\n      ...mapState({\n        empData : state => state.hr.emp.empData,\n        myDocumentInfo : state => state.hr.approval.documentInfo,\n        empList : state => state.hr.emp.empList,\n      })\n    },\n    data(){\n      return {\n        deptOptions:[\n          {value:'', text:'전체선택'},\n          {value:'DE01', text:'개발팀'},\n          {value:'DE02', text:'웹디자인팀'},\n          {value:'DE03', text:'총무팀'},\n          {value:'DE04', text:'마케팅팀'},\n          {value:'DE05', text:'기술지원팀'},\n        ],\n        deptEditOptions:[\n          {value:'DE01', text:'개발팀'},\n          {value:'DE02', text:'웹디자인팀'},\n          {value:'DE03', text:'총무팀'},\n          {value:'DE04', text:'마케팅팀'},\n          {value:'DE05', text:'기술지원팀'},\n        ],\n        positionOptions:[\n          {value:'', text:'전체선택'},\n          {value:'PO01', text:'사원'},\n          {value:'PO02', text:'대리'},\n          {value:'PO03', text:'과장'},\n          {value:'PO04', text:'차장'},\n          {value:'PO05', text:'부장'},\n          {value:'PO06', text:'전무'},\n          {value:'PO07', text:'이사'},\n        ],\n        positionEditOptions:[\n          {value:'PO01', text:'사원'},\n          {value:'PO02', text:'대리'},\n          {value:'PO03', text:'과장'},\n          {value:'PO04', text:'차장'},\n          {value:'PO05', text:'부장'},\n          {value:'PO06', text:'전무'},\n          {value:'PO07', text:'이사'},\n        ],\n        fields: [\n          { key: 'empNumber', label: '사번' },\n          { key: 'empName', label: '이름' },\n          { key: 'empId', label: '회원 ID' },\n          { key: 'deptName', label: '부서명' },\n          { key: 'positionName', label: '직급' },\n        ],\n        tableColumns: [\n          {\n            empNumber: 0,\n            empName: '',\n            empId: '',\n            deptName: '',\n            positionName: '',\n          },\n        ],\n        deptCode: '',\n        positionCode: '',\n        selectMode:'single',\n        empInfo:[\n          {\n            empNumber:0,\n            empName:'',\n            empId:'',\n            empPw:'',\n            joinPw:'',\n            deptCode:'',\n            positionCode:'',\n            joinDate:'',\n            statusName: '',\n          }\n        ],\n        showPw:false,\n        password:'password',\n        editMode:false,\n        disabled:true\n      }\n    },\n    methods:{\n      searchEmpList(){\n        const empSearchOption = { deptCode : this.deptCode, positionCode : this.positionCode }\n        console.log(empSearchOption)\n        this.$store.dispatch('hr/emp/findAllEmp',empSearchOption)\n      },\n      selectedEmpInfo(event){\n        this.editMode = false\n        this.disabled = true\n\n        const empNumber = parseInt(event.target.id)\n        this.empList.filter(e => {\n          if(e.empNumber === empNumber){\n            this.empInfo[0].empNumber = e.empNumber\n            this.empInfo[0].empName = e.empName\n            this.empInfo[0].empId = e.empId\n            this.empInfo[0].deptName = e.deptName\n            this.empInfo[0].positionName = e.positionName\n            this.empInfo[0].joinDate = e.joinDate\n            this.empInfo[0].statusName = e.statusName\n            this.empInfo[0].withdrawDate = e.withdrawDate\n          }\n        })\n      },\n      withdrawEmp(){\n        const date = this.createNowDate()\n        this.$swal.fire({\n          icon:'question',\n          title: '회원을 탈퇴시킵니다.',\n          text: '탈퇴 시키겠습니까?',\n          showCancelButton: true,\n          confirmButtonText: '수정하기',\n          cancelButtonText: '취소',\n        }).then((result) => {\n          if (result.isConfirmed) {\n            this.$store.dispatch('hr/emp/withdrawEmp', { empNumber : this.empInfo[0].empNumber, withdrawDate : date, status : 'ST03' }).then(() => this.resetFunc())\n            this.$swal.fire({\n              icon:'success',\n              title: '완료!',\n              confirmButtonText: '닫기',\n            })\n          }\n        })\n      },\n      createNowDate(){\n        const date = new Date()\n        const year = date.getFullYear()\n        const month = date.getMonth()+1\n        const day = date.getDate()\n\n        return `${year}-${('00'+month).slice(-2)}-${('00'+day).slice(-2)}`\n      },\n      showPassword(){\n        if(this.showPw){\n          this.password = 'password'\n          this.showPw = false\n        }else{\n          this.password = 'text'\n          this.showPw = true\n        }\n      },\n      setEditMode(){\n        this.$swal.fire({\n          title: '사용자 인증을 합니다.',\n          input: 'text',\n          inputAttributes: {\n            autocapitalize: 'off'\n          },\n          showCancelButton: true,\n          confirmButtonText: '입력',\n          showLoaderOnConfirm: true,\n          preConfirm: (empPw) => {\n            return this.$store.dispatch('hr/emp/userCertified', { empId : this.empInfo[0].empId, empPw : empPw }).then(e => {\n              if(e === 'fail'){\n                throw new Error(e)\n              }\n            }).catch(error => {\n              this.$swal.showValidationMessage(\n                  `Request failed: ${error}`\n              )\n            })\n          },\n          allowOutsideClick: () => !this.$swal.isLoading()\n        }).then((result) => {\n          if (result.isConfirmed) {\n            this.$swal.fire('Saved!', '', 'success')\n            console.log('editMode : '+this.editMode)\n            if(this.editMode){\n              this.editMode = false\n              this.disabled = true\n            }else{\n              this.editMode = true\n              this.disabled = false\n            }\n          }\n        })\n      },\n      editEmp(){\n        this.$swal.fire({\n          icon:'question',\n          title: '회원 정보를 수정하시겠습니까?',\n          showCancelButton: true,\n          confirmButtonText: '수정하기',\n          cancelButtonText: '취소',\n        }).then((result) => {\n          if (result.isConfirmed) {\n            this.$store.dispatch('hr/emp/editEmpInfo', this.empInfo)\n            this.$swal.fire({\n              icon:'success',\n              title: '완료!',\n              confirmButtonText: '닫기',\n            }).then((result) => {\n              if (result.isConfirmed) {\n                this.resetFunc()\n              }\n            })\n          }\n        })\n      },\n      resetFunc(){\n        const empSearchOption = { deptCode : this.deptCode, positionCode : this.positionCode }\n        this.$store.dispatch('hr/emp/findAllEmp', empSearchOption)\n\n\n        this.empInfo = [\n          {\n            empNumber:0,\n            empName:'',\n            empId:'',\n            empPw:'',\n            joinPw:'',\n            deptCode:'',\n            positionCode:'',\n            joinDate:'',\n          }\n        ]\n      }\n    }\n  }\n</script>\n<style>\n  .executiveList{\n    border-radius: 5px;\n    min-height: 50px;\n  }\n</style>"]}]}